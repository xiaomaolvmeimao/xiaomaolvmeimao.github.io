---
layout:     post
title:      一文读懂以太坊-智能合约驱动的区块链革命
author:     Luke Wang
tags: 		ETH 区块链 Crypto
subtitle:   入门区块链
category:  note
---


# 第一章 以太坊（历史篇）

## 1.1 以太坊的诞生由来
2013年底，以太坊的创始人维塔利克·布特林(Vitalik Buterin)开始思考扩展比特币和Mastercoin（一个扩展比特币以提供基础智能合约的覆盖协议）的能力。他向Mastercoin团队提出了一个更通用的方法，但该提议过于激进，无法融入他们的开发路线图。于是，他开始撰写以太坊白皮书，提出一个图灵完备的通用区块链，理论上只要有足够的时间和内存，它可以解决任何计算问题  
2013年12月，Vitalik开始分享以太坊白皮书的早期草稿，并得到了包括Gavin Wood、Joseph Lubin和Charles Hoskinson在内的一群程序员的支持。2014年1月，他们正式宣布了以太坊项目的诞生

### 1.1.1什么是以太坊
比特币作为世界上第一个加密货币，主要用途集中在货币支付和价值存储方面，脚本语言相对有限，难以支持复杂的业务逻辑和应用开发。Vitalik Buterin在 2013 年提出了以太坊的概念，旨在创建一个更通用的区块链平台，能够支持各种去中心化应用（DApp）的开发，让开发者可以利用区块链技术构建更多类型的项目，而不仅仅局限于货币领域。2015年以太坊正式上线

> 比特币是一个基于区块链技术的去中心化<u>数字货币系统</u> ，而以太坊（Ethereum）是一个开源的、去中心化的<u>区块链平台</u>。

### 1.1.2 以太坊的作用

1. 作为去中心化应用的开发平台  
以太坊提供了图灵完备的编程语言 Solidity，开发者可以利用它编写复杂的智能合约，实现各种功能和应用逻辑。以太坊虚拟机（EVM）为智能合约的执行提供了一个安全、隔离的运行环境，确保智能合约的执行一致性和可靠性。每个以太坊节点都运行着一个EVM的实例，当智能合约被调用时，所有节点的EVM会同步执行该合约的代码，以达成共识

2. 支持去中心化金融（DeFi）  
以太坊上的智能合约可以实现自动化的金融交易和协议，如去中心化交易所允许用户无需中介即可进行代币交易，借贷平台则可以实现去中心化的借贷服务，稳定币实现去中心化货币单位。  

3. 推动非同质化代币（NFT）发展  
以太坊为 NFT 的创建和交易提供了技术支持和基础环境，NFT 的所有权和交易记录可以被永久地记录在以太坊区块链上，确保了其唯一性和真实性。促进了数字内容创作和收藏产业的发展，为艺术家、创作者和收藏家提供了一种新的数字资产形式和价值体现方式，推动了数字文化艺术的创新和繁荣

4. 实现去中心化治理  
通过智能合约和去中心化应用，以太坊可以构建去中心化自治组织（DAO），让社区成员能够以去中心化的方式参与项目的决策和管理，提高决策的透明度和公正性，降低中心化管理的风险和成本。例如，一些去中心化金融项目通过 DAO 进行治理，持币者可以对项目的参数调整、新功能开发等事项进行投票表决，实现了社区的共治和共建。

5. 附带收益的价值储存资产  
用户可以通过质押 ETH 成为验证者，参与网络的共识和验证过程，从而赚取 ETH 形式的奖励，获得额外的收益，同时也有助于增强以太坊网络的安全性和稳定性。

6. 原始结算抵押品  
ETH 为数十亿的稳定币、现实世界资产（RWA）和金融应用提供安全保障，作为这些资产和应用的底层抵押品，确保了其价值的稳定和可靠性

7. 计算燃料  
每次在以太坊上进行链上操作，如稳定币转账、代币化现实世界资产的发行、执行交易、运行新的应用程序等，都会消耗 ETH 作为计算燃料，它是驱动以太坊上的计算、数据存储、资产转移和价值结算的基础资产


## 1.2 ETH历史：关键里程碑
- ICO 是 Initial Coin Offering 的缩写，意思是“首次代币发行”或“首次币发行”。当项目有一定的技术基础和白皮书等详细规划、较为成熟时，通过向外界募集资金，以支持项目的开发和运营
- The DAO事件：The DAO是由Slock.it团队设计的去中心化自治组织（Decentralized Autonomy Organization）
  - 2016年4月30日到5月28日，The DAO在以太坊上进行了一场史上最大的众筹活动，共筹集约1.5亿美元的ETH，占当时以太坊网络总流通量的14%。然而由于智能合约代码存在漏洞，2016年6月17日，黑客利用这一漏洞，将约360万个ETH（当时价值约5000万美元）转移到自己控制的账户中
  - 以太坊网络分裂为两个独立的区块链：以太坊（ETH）和以太坊经典（ETC）。前者支持回溯资金，后者则保留了原始区块链记录。被盗的资金在ETH链上被归还给了投资者，但在ETC链上，黑客仍然控制着约850万美元价值的代币
- Metropolis 升级分为三个阶段：拜占庭（Byzantium）、君士坦丁堡（Constantinople）和伊斯坦布尔（Istanbul）。
  - 拜占庭阶段 ：于2017年10月16日实施，通过一系列改进措施，如引入新的虚拟机操作码、支持零知识证明（ZK-SNARKs）等技术，为以太坊网络带来了更多的功能和灵活性，为后续的升级奠定了基础
  - 君士坦丁堡阶段 ：原计划于2019年1月16日进行，但因发现安全漏洞而推迟，最终在2019年2月28日成功实施。它进一步优化了以太坊的性能和费用结构，降低了智能合约的执行成本，为开发者提供了更多的工具和功能，以构建更复杂的应用程序
  - 伊斯坦布尔阶段 ：于2019年12月7日激活，引入了包括提高数据存储效率、改进网络通信等在内的多项改进，继续推动以太坊网络的优化和发展，同时为以太坊 2.0 的进一步发展做准备
- 信标链：作为ETH 2.0 的核心组成，是独立于以太坊主链的一条链，但与主链互相交互和协作。功能包括管理验证者注册表、实现 POS 共识机制、协调分片链之间的状态通信等，为后续分片链的上线和以太坊网络的整体升级奠定基础  
- EIP：Ethereum Improvement Proposal 以太坊改进提案。它是以太坊社区用于提议、讨论和采纳以太坊平台改进方案的一种标准化流程和文档格式


  | 时间             | 事件描述                                         | 影响                          |
  | -------------- | -------------------------------------------- | --------------------------- |
  | 2013年11月   | Vitalik Buterin 发表以太坊白皮书                     | 提出了图灵完备智能合约的平台概念，标志以太坊的诞生   |
  | 2014年7月   | 以太坊进行众筹（ICO），募资超31000 BTC                    | 开启区块链项目通过ICO融资的先河           |
  | 2015年7月30日 | 以太坊主网正式上线（Frontier版本）                        | 以太坊网络正式启用，支持智能合约运行          |
  | 2016年6月    | The DAO事件：黑客利用漏洞盗走360万ETH                    | 以太坊社区产生分歧，直接导致后来的硬分叉        |
  | 2016年7月20日 | 以太坊硬分叉，产生以太坊（ETH）和以太坊经典（ETC）                 | 形成两条链：ETH（改回资金）与ETC（坚持不可篡改） |
  | 2017年      | ICO热潮，80%以上项目基于以太坊发布                         | 推动ETH价格飙升，同时引发合规与安全争议       |
  | 2018年1月    | ETH价格历史最高，接近1400美元                           | 以太坊市值大幅上涨，引发广泛关注与泡沫讨论       |
  | 2019年1月   | 启动Constantinople硬分叉                          | 减少矿工奖励、为ETH 2.0做技术准备        |
  | 2020年12月1日 | ETH 2.0 Phase 0 启动：信标链上线                     | 迈向PoS共识机制的第一步，运行并行链         |
  | 2021年8月5日  | EIP-1559 升级上线（伦敦硬分叉）                         | 引入基础手续费销毁机制，改善gas管理和ETH通缩预期 |
  | 2022年9月15日 | “The Merge”：以太坊正式从 PoW 转向 PoS                | 能耗下降超99%，以太坊进入绿色、可持续阶段      |
  | 2023年4月12日 | Shanghai/Capella 升级（Shapella）                | 允许验证者提取质押的ETH，验证了PoS机制完整性   |
  | 2024年3月    | Dencun 升级上线，支持“Proto-Danksharding”（EIP-4844） | 降低Layer2成本，推进以太坊扩展性解决方案     |
  | 2025年上半年  | Rollup生态继续壮大，zkEVM等技术快速落地                    | Layer2成为主流扩展路径，以太坊网络压力减轻    |




# 第二章 关于以太坊结构
## 2.1 账户模型
比特币：基于 UTXO 模型，没有传统意义上的“账户”，账户余额通过查找未花费的 UTXO 累加计算。  
以太坊：基于账户模型，有明确的账户概念，每个账户都有余额和代码，账户状态通过状态树存储和管理。

1. 账户类型：以太坊的账户分为两种类型：外部账户（Externally Owned Accounts，简称 EOA）和合约账户（Contract Accounts，简称 CA） 
  - 外部账户（EOA）
    - 控制权：由私钥控制，用户通过私钥签名来发起交易 
    - 功能：可以发送交易（包括转账和调用合约），但不能存储代码 
    - 特点：拥有以太币余额，是用户与以太坊网络交互的主要方式 
  - 合约账户（CA）
    - 控制权：由智能合约代码控制，当合约账户接收到交易时，其代码会被执行
    - 功能：可以存储和执行代码，代码可以执行复杂的逻辑，如转账、调用其他合约等 
    - 特点：同样拥有以太币余额，但无法直接发起交易，需要由外部账户或其他合约账户触发 

2. 账户数据结构：以太坊账户的数据结构包含四个主要部分
  - Nonce(累计发起交易次数)：用于防止重放攻击，记录账户已经发起的交易数量。每发起一次交易，账户Nonce值加1，且交易记录里也记录Nonce值；如果发现是使用过的Nonce值，交易就会被拒绝
  - Balance(账户余额)：表示账户中拥有的以太币数量。以Wei为单位，1个以太币等于10^18个Wei 
  - StorageRoot(合约存储树的根节点哈希值)：存储账户的存储数据，是一个 MPT（Merkle Patricia Trie）树的根节点哈希值，用于存储智能合约的持久化数据 
  - CodeHash(智能合约代码的哈希值)：存储账户的智能合约代码的哈希值。对于外部账户，CodeHash 为空；对于合约账户，它指向合约代码 

> 交易重放：重复提交已经确认的交易，
> 双重支付：同一笔资金用于多次支付


## 2.2 以太坊区块结构
在以太坊网络中，区块通过ParentHash链接到其父区块，形成连续的区块链结构，从而确保交易的顺序性和不可篡改性。每个区块包含一组经过验证和执行的交易，这些交易在被纳入区块后会更新网络的全局状态。此外，叔块（即过去7代以内的区块）可以通过UncleHash记录在区块中，进一步增强网络的安全性和共识效率。这种链式结构不仅维护了整个网络的一致性，还通过存储和共识机制保障了交易的安全性
### 2.2.1 以太坊的区块由三个主要部分组成：区块头（Header）、交易列表（Transactions）和叔块列表（Uncles）
1. 区块头（Header）：区块的元数据信息，包含字段：
  - ParentHash：父区块的哈希值，用于链接区块 
  - Nonce：工作量证明的随机数，用于挖矿 
  - GasLimit：区块允许使用的最大 Gas 量 
  - GasUsed：区块中所有交易实际使用的 Gas 量 
  - Difficulty：挖矿难度值 
  - Number：区块高度 
  - Timestamp：区块创建的时间戳 
  - **StateRoot：状态树的根哈希值**
  - **MerkleRoot：交易列表的Merkle树根哈希值**
  - **ReceiptsRoot：交易收据树的根哈希值**

2. 交易列表（Transactions），包含区块中的所有交易，交易字段：
  - Nonce：发送方账户的交易序号 
  - GasPrice：发送方愿意为每单位 Gas 支付的费用 
  - GasLimit：交易允许使用的最大 Gas 量 
  - To：接收方地址（对于合约创建交易，此字段为空） 
  - Value：转账的以太币数量 
  - Data：交易附加数据（如调用合约时的参数） 
  - V, R, S：交易签名，用于验证交易发送方的身份 

3. 叔块列表（Uncles），叔块指包含与当前区块相邻但未被包含在主链中的区块，目的是增加网络安全性，减少挖矿中心化

### 2.2.2 以太坊存储数据结构MPT  
在以太坊中，状态树（State Trie）、交易列表的Merkle树（Transactions Trie）和交易收据树（Receipts Trie）都使用了Merkle Patricia Trie（MPT）数据结构。MPT是一种经过改良的、融合了默克尔树和前缀树两种树结构优点的数据结构，用于高效存储和检索区块链数据。  
#### 1. 前缀树  
前缀树（也叫字典树）是一种用来存储类似字典那样的键值对的树形结构，其中键（key）通常是字符串。在前缀树里，每个节点在树中的位置是由它所属的键的内容决定的。具体来说，一个键值对应的路径是从根节点一直延伸到那个特定节点的，这条路径上的字符连起来就构成了这个键。value通常存储在叶子节点中，与key相关联。  
如下图所示，图中共有6个叶子节点，其key的值分别为（1）to（2）tea（3）ted（4）ten（5）A（6）inn。

- 优势
  - 高效前缀查询：前缀树在查找具有共同前缀的键时效率极高。例如，查找前缀为“pre”的单词，前缀树仅需定位到该前缀节点，再遍历其子树即可，时间复杂度为O(m)，其中m为前缀长度。相比之下，哈希表需遍历整个表，时间复杂度为O(n)
  - 无哈希冲突：前缀树不存在哈希冲突问题，这在哈希表中是常见的性能瓶颈
- 劣势
  - 查找效率较低：前缀树的查找效率为O(m)，其中m为键的长度，而哈希表的查找效率为O(1)。此外，前缀树查找可能涉及多次IO操作，对磁盘压力较大，尤其在键较长时
  - 空间浪费：当键值很长且无共同前缀时，前缀树需创建大量非叶子节点来构建路径，可能导致空间浪费

#### 2. 默克尔树  
  a. 在比特币网络中，merkle树被用来归纳一个区块中的所有交易，同时生成整个交易集合的数字指纹。merkle树是自底向上构建的。在下图的例子中，首先将D0-D3四个单元数据哈希化，然后将哈希值存储至相应的叶子节点N0-N3。  
  b. 将相邻两个节点的哈希值合并成一个字符串，然后计算这个字符串的哈希，得到的就是这两个节点的父节点的哈希值N4-N5。  
  c. 循环重复上述计算过程，最后计算得到最后一个节点的哈希值，将该节点的哈希值作为整棵树的哈希Root。  
  d. 若两棵树的根哈希一致，则这两棵树的结构、节点的内容必然相同。如下图所示，一棵包含4个叶子节点的树，若采用逐层计算哈希值的方式，需要进行7次哈希计算；而直接将这4个叶子节点的值拼接成一个字符串进行哈希计算，仅需1次哈希操作。既然如此，为什么还要选择这种看似复杂的方法呢？  
- 优势：
  - 快速重哈希：当树节点内容发生变化时，能够在前一次哈希计算的基础上，仅将被修改的树节点进行哈希重计算，便能得到一个新的根哈希，用来代表整棵树的状态。  
  - 轻节点扩展：轻节点只需存储约80字节的区块头数据，无需下载或存储交易列表、回执列表等信息，通过验证区块头即可确认交易的存在与状态。使其能在非信任的公链环境中验证特定交易是否被收录进区块链账本，也让比特币、以太坊等区块链可运行在个人 PC、智能手机等存储容量有限的终端上
- 劣势：
  - 存储空间开销大


<div style="display: flex; justify-content: space-between; align-items: center;">
  <div style="flex: 1;">
    <img src="https://s21.ax1x.com/2025/07/23/pVGRzMq.png" alt="图片1" style="height: 200px; width: auto;"/>
    <p style="text-align: center; color: gray;">前缀树</p>
  </div>
  
  <div style="width: 10px; height: 100%; background-color: black;"></div>
  <div style="flex: 1;">
    <img src="https://img2.baidu.com/it/u=2845532733,691130213&fm=253&fmt=auto&app=138&f=PNG?w=935&h=500" alt="图片2" style="height: 200px; width: auto;"/>
    <p style="text-align: center; color: gray;">默克尔树</p>
  </div>
</div>


#### 3. 状态树/交易树/收据树  
1. 状态树（State Trie）：用于存储以太坊网络中所有账户的当前状态，包括交易次数、余额、MPT根哈希等  
2. 交易树（Transactions Trie）：用于存储区块中所有交易的哈希值，每笔交易在交易树中都有一个唯一的哈希值  
3. 收据树（Receipts Trie）：用于存储区块中所有交易的收据，每笔交易的收据包含交易的执行结果，如状态码、日志、使用GAS量、区块号等  
- 高效存储：状态树通过Merkle Patricia Trie结构高效地存储和检索账户状态。通过路径压缩和哈希值验证，减少存储空间并提高查询效率。
- 快速验证：
   - 通过Merkle证明快速验证<u>某账户状态</u>是否正确。轻节点可以利用状态树快速同步区块链状态，而无需下载整个区块链。
   - 可以快速验证<u>某笔交易</u>是否包含在区块中。轻节点可以利用交易树快速验证交易的存在性，而无需下载整个区块。
   - 可以快速验证<u>某笔交易的收据</u>是否包含在区块中。轻节点可以利用收据树快速验证交易的执行结果，而无需下载整个区块。
- 区块头信息构建：每个区块的区块头包含状态树/交易树/收据树的根哈希值，表示该区块的状态。
- 支持智能合约(仅状态树)：状态树不仅存储账户余额，还存储智能合约的代码和存储数据，支持复杂的智能合约逻辑。

<div style="display: flex; justify-content: space-between; align-items: center;">
  <div style="flex: 1;">
    <img src="https://s21.ax1x.com/2025/07/23/pVGWAJJ.png" alt="图片1" style="height: 250px; width: auto;"/>
    <p style="text-align: center; color: gray;">状态树存储示意1</p>
  </div>
  <div style="width: 5px; height: 100%; background-color: black;"></div>
  <div style="flex: 1;">
    <img src="https://s21.ax1x.com/2025/07/23/pVGWki4.png" alt="图片2" style="height: 250px; width: auto;"/>
    <p style="text-align: center; color: gray;">状态树更新示意2</p>
  </div>
</div>





# 第三章 以太币（ETH）介绍

## 3.1 ETH核心功能​
以太币在以太坊生态系统中扮演着多重关键角色，其核心功能主要体现在以下几个方面：​
- 交易费用支付：在以太坊网络上进行任何操作（如发送以太币、部署智能合约、调用合约功能等）都需要消耗一定数量的以太币，这些费用被称为 "Gas 费"，用于补偿验证者处理交易的计算资源投入​。Gas 费的多少取决于操作的复杂程度和网络拥堵状况，以太币作为支付媒介确保了网络的正常运行和安全性​​
- 智能合约运行燃料：以太坊的核心优势在于支持智能合约，而执行这些合约代码需要消耗计算资源。开发者必须使用以太币来支付合约部署和执行的费用，这确保了系统不会被滥用或过度负载​
- 网络安全保障：在权益证明 (PoS) 共识机制下，用户通过质押以太币成为网络验证者，参与区块验证和网络安全维护。质押的以太币数量决定了验证者获得记账权的概率，这一机制确保了网络的去中心化和安全性​
- 价值存储与资产属性：随着以太坊网络的发展，以太币逐渐展现出价值存储的功能。特别是在 "合并" 完成后，以太币的通胀率大幅下降，甚至可能出现通缩，使其成为一种具有保值潜力的数字资产​​
- 生态系统激励机制：以太币是以太坊生态系统的经济激励核心。它激励开发者创建去中心化应用，鼓励用户参与网络活动，同时也为验证者提供维护网络安全的动力，形成了一个自我强化的经济系统​


## 3.2 ETH在以太坊生态系统中的地位​
以太币是以太坊生态系统的经济基础，它将技术架构与经济激励完美结合，为整个生态系统提供动力。以太坊作为一个去中心化的全球计算机，其运行离不开以太币提供的经济激励和资源管理机制​

在以太坊生态系统中，以太币具有多重属性，使其成为一种 "三位一体" 的超级资产：​
1. 可消耗 / 可转换资产：大量以太币作为手续费被 "燃烧" 掉，这使其具备了类似石油和天然气的消耗属性。网络使用需求越大，流通量越低，进而影响整个系统的价值​
2. 资本类资产：持有者可以将以太币进行质押，持续获得数字资产奖励，为持有者带来某种形式的 "现金流"​
3. 价值存储资产：在完全引入权益证明共识机制后，以太币的年度供给量增长率可能会从 4% 逐步下降，甚至可能变成负数，也就是出现通缩，这使其具备了价值存储的维度​​

此外，以太币还在 DeFi (去中心化金融) 平台中作为抵押物锁定在智能合约中，以贷出其他数字资产或作为 "准备金" 发行新的数字资产，展现出资产派生功能。在 NFT 交易等场景中，以太币是主要的交易媒介，并可以通过跨链桥实现在多条区块链上流通，具备 "一般等价物" 属性​。这些特点共同确立了以太币在以太坊生态系统中的核心地位



## 3.3 ETH发行机制
### 3.3.1 ETH初始发行：ICO 与早期分发​
以太币的发行历史可以追溯到2014年，其初始发行采用了首次代币发行(ICO)的方式。2014年7月，以太坊团队通过为期42天的ICO向公众出售以太币，募集比特币作为资金支持项目开发​。这次ICO是加密货币历史上规模最大的众筹之一，最终募集了约31531个比特币(时价约1800万美元)​  

以太币的初始发行总量约为7200万枚，其中：​
- 约6010万枚(占比约83.5%)出售给了投资者​
- 约1290万枚(占比约17.5%)分配给了以太坊基金会和早期贡献者​  

这次ICO的成功为以太坊项目提供了充足的资金支持，也为以太币的流通奠定了基础。与比特币不同，以太坊在设计之初并没有设定固定的总量上限，而是采用了一种动态的供应机制，这使得以太币的总供应量会随着时间推移而变化​

### 3.3.2 工作量证明阶段的发行机制​
在2022年9月"合并"(TheMerge)之前，以太坊采用工作量证明(PoW)共识机制，通过矿工竞争解决复杂数学问题来验证交易并创建新区块​。在这一阶段，以太币的发行主要通过区块奖励和叔块奖励来实现：​  

**区块奖励：** 每个成功挖出的区块会奖励矿工一定数量的以太币。在以太坊1.0版本中，每个区块奖励约为2ETH，且每个区块平均生成时间约为13-15秒。<u>意味着每年大约会新增500多万个ETH​</u>  

**叔块奖励：** 由于网络延迟等原因，有时会出现多个矿工几乎同时挖出区块的情况，这些未被主链接受的区块被称为"叔块"。为了鼓励矿工继续支持网络，叔块的创造者也会获得一定比例的奖励，这进一步增加了以太币的供应量​

**通货膨胀率：** 在PoW机制下，以太坊的年通胀率相对较高，约为4%左右。这意味着每年会有大约4%的新以太币进入流通市场，这一通胀率显著高于传统法定货币的平均通胀水平​

在PoW阶段，以太坊的供应量虽然没有固定上限，但有明确的增发率，这使得投资者能够预测未来的供应增长情况。这种发行机制也带来了高能耗的问题，据估计，以太坊网络在PoW时期的能源消耗与一些小型国家相当​

### 3.3.3 权益证明阶段的发行变革
2022年9月15日，以太坊网络迎来了历史性的"巴黎升级"(区块高度：15537394)，此次升级将以太坊网络原有的"工作量证明"共识机制过渡到"权益证明"共识机制，这一过程被称为"合并"(TheMerge)​。合并是以太坊发展史上的重要里程碑，彻底改变了以太币的发行机制：​

- **验证者取代矿工：** 合并之后，以太坊不再需要"矿工"投入硬件挖矿的方式产出以太币，而是采用质押以太币运行节点的方式获取以太币奖励。新的验证者不再是过去提供算力的"矿工"，而是质押了32枚以太币的节点，这些节点在每次验证交易时会按照比例收到以太币作为奖励​

- **区块奖励机制改变：** 在PoS机制下，每年产生的以太币数量不再由固定的区块奖励决定，而是根据质押者的数量动态调整。具体而言，如果质押者多，验证奖励会相应减少，而质押者少时，奖励会增加以鼓励更多人质押。这一机制被称为"动态通胀控制"，它确保了以太币的供应量在长期内维持在一个平稳水平，避免出现过度通胀​

- **通胀率大幅下降：** 合并后，以太币的年通胀率从约4%急剧下降至0.5%-1%左右，显著降低了供应增长速度​。以太坊在PoW共识机制下，按照13.5秒计算出块，每个区块产生的奖励约为2.1个ETH，相应地一年出块奖励约为491万ETH。转为PoS共识机制后，PoW挖矿出块奖励被取消，新增的ETH仅通过质押奖励发行，当前信标链上的总质押量为13,883,221ETH，年化收益约为4.2%，一年的ETH质押奖励约为58.31万ETH。综合来看，合并使ETH年通胀率从4.3%降低至0.43%​

- **EIP-1559与燃烧机制：** 合并还带来了另一个显著的改变——EIP-1559提案的实施。该提案引入了"基础费"(BaseFee)燃烧机制，即在每笔交易中会有部分以太币被直接销毁，不再回归到流通供应中。这一机制使得以太币的总量在某些高交易量的情况下甚至可能出现"通缩"，即销毁量超过新增供应量。这种通缩机制为以太币增加了稀缺性，从而进一步提升了其长期价值​


## 3.4 POS验证过程
### 3.4.1 影响验证权概率的因素：

32 ETH 是一个“验证者插槽”的最低门槛。质押 32 ETH 会获得一个“验证者身份”。如果质押了 64 ETH，就可以获得两个验证者身份；质押 96 ETH 就是三个，以此类推。每个验证者身份是独立的，质押再多也不能增强某个验证者插槽的权重，而是要拆成多个32ETH的验证者。所以，成为区块提议者或参与验证的概率，主要由你所拥有的验证者数量（即32ETH为单位的“插槽”数量）决定

| 因素                               | 影响说明                                     |
| -------------------------------- | ---------------------------------------- |
| **质押总量占比**                       | 你控制的验证者占全网总验证者的比例越高，被选中概率越高              |
| **活跃状态**                         | 验证者需处于活跃状态，且客户端正常在线、响应及时，否则即使有资格也可能错过    |
| **以太坊信标链的随机数种子**（RANDAO）         | 验证者被选中是基于伪随机过程（使用RANDAO + VRF），无法人为预测、操控 |
| **客户端行为表现（uptime, performance）** | 表现差（比如宕机、迟到）不会影响下一轮选中概率，但会减少奖励甚至罚款       |


### 3.4.2 POS验证过程：

#### 3.4.2.1 Slot 驱动的共识节奏：12 秒内的角色分工

以太坊采用 Slot 机制，每 12 秒作为一个固定时间窗口，驱动信标链网络运行。在每一个 Slot 开始时，信标链会通过链上随机数（RANDAO）与历史状态结合，确定两个关键角色：
- 1 名 Proposer：负责在本 Slot 提议新区块；
- 一组 Attesters：从全体验证者中抽选出来，分属不同委员会（Committee），负责验证新区块。

这种结构设计保证了每个 Slot 都有明确的出块者和验证者群体，使网络具备持续推进和安全验证的能力。


#### 3.4.2.2 出块者 Proposer 的职责：构建并广播新区块
被选为 proposer 的验证者节点，会在本地执行如下流程：
- 从本地 mempool 收集交易，优先选择手续费高或与 MEV 有关的交易；
- 结合上一个区块的链头、状态根、RANDAO 值等信息；
- 构建一个合法的区块（Beacon block），包括执行状态转换（如账户余额变化）；
- 对区块进行签名，并通过 Gossip 网络广播出去。

此时区块还未被网络认可，仅是 proposer 的提议（Proposal）。后续能否被链接受，还需其他验证者的确认。

#### 3.4.2.3 见证者 Attesters 的任务：验证并见证新区块
每个 Slot 被选中的 attesters，会在接收到 proposer 广播的区块后，进行本地验证，包括：
- 校验 proposer 签名是否合法；
- 确保区块引用的父区块是本地视角下的“链头”；
- 模拟状态转换（即执行交易）以验证区块状态根是否一致；
- 确认区块时间戳与 Slot 匹配，结构格式正确。

完成验证后，attester 节点会生成一个 attestation（见证签名），包括当前 Slot 的区块 hash、源和目标 checkpoint、以及其自身的 BLS 签名，并通过 Gossip 网络广播。

这些 attestation 是投票，代表验证者对某一区块的“支持态度”，是信标链判断哪条链为主链的基础。

#### 3.4.2.4 共识推进机制：attestation 如何驱动链的前进
attestation 的本质是“投票”，信标链共识算法会基于大量 attesters 的签名来判断哪个区块应被视为“最佳链头”。下一个 Slot 的 proposer 和 attesters，会参考这些 attestation：
- Proposer 会优先选择 attestation 数量最多的链头继续构建新区块；
- 信标链客户端通过 LMD GHOST 算法，持续动态地决定链的主分支；
- attestation 本身也会被包含在后续区块中，形成链式投票记录。

这就形成一个递进式的投票机制，区块的被接受程度，随着 attestation 的积累逐步提升。

#### 3.4.2.5 Finality 最终性：何时认为区块“不可逆”？
区块是否真的“写入链中”不仅取决于 proposer 的提案，也不仅是短期内的多数 attester 支持。信标链还设置了两层安全边界：
- Justified：某一区块在一个 epoch（32 个 Slot）中，被大多数验证者支持；
- Finalized：某一区块以及它的子孙区块，都达到了 justified 标准，此区块便不可被重组，达成“最终性”。

当一个区块 Finalized 后，即便是恶意攻击者控制了网络大多数节点，也无法轻易回滚这个区块。这种最终性设计，为以太坊 PoS 提供了强一致性保障。


## 3.4 ETH市场表现
ETH动态调节供应上线，和BTC不一样。
合并后，新ETH变少。
质押也保证流通变少。
燃烧机制是什么，也会使得ETH通缩？
是否还有其他方面，相比pos比pow更容易使得ETH更稀有。请围绕更稀有展开

## 3.5 ETH单位
### 3.5.1 Wei：以太币的最小单位​
在以太坊的货币体系中，Wei 是以太币的最小单位，也是以太坊网络内部计算和记账的基本单位。Wei 的命名是为了纪念计算机科学家和数学家克劳德・香农 (Claude Shannon) 的同事 Wei Dai，他是最早提出加密货币概念的先驱之一​
- 定义与数值：1 Wei 等于 0.000000000000000001 ETH (即 10^-18 ETH)。这种微小的单位设计使得以太坊能够处理非常小的价值转移，同时保持高精度的计算能力​
- 使用场景：Wei 主要用于以太坊网络内部的计算和智能合约编程。在智能合约中，所有涉及以太币金额的计算通常都是以 Wei 为单位进行的，这避免了浮点运算带来的精度问题。例如，当智能合约需要处理交易费用或计算利息时，会使用 Wei 作为基本单位，然后在向用户展示时转换为更易读的单位​

在 Solidity 智能合约编程语言中，开发者可以直接在代码中使用 Wei 单位，例如：
```typescript
assert(1 wei == 1);​
assert(1 gwei == 1e9);​
assert(1 ether == 1e18);
```
### 3.5.2 以太币的单位体系与换算关系
以太币采用了类似于国际单位制的十进制单位体系，不同单位之间以 10 的幂次进行换算。这种设计使得不同规模的价值都能以合适的单位表示，提高了可读性和实用性。以太币的主要单位及其换算关系如下：

**基本单位体系**：
- 1 Wei = 1 (最小单位)
- 1 Kwei = 1,000 Wei = 10^3 Wei
- 1 Mwei = 1,000,000 Wei = 10^6 Wei
- 1 Gwei = 1,000,000,000 Wei = 10^9 Wei (也称为 "Shannon")
- 1 Szabo = 1,000,000,000,000 Wei = 10^12 Wei
- 1 Finney = 1,000,000,000,000,000 Wei = 10^15 Wei
- 1 Ether = 1,000,000,000,000,000,000 Wei = 10^18 Wei (基本单位)

这些单位的命名大多是为了纪念加密货币和计算机科学领域的先驱人物，例如：  
"Szabo" 纪念 Nick Szabo，他提出了比特黄金的概念  
"Finney" 纪念 Hal Finney，他是比特币的早期开发者和第一个比特币接收者  
"Shannon" 纪念 Claude Shannon，信息论的创始人  

**常用单位换算示例**：
- 1 Ether = 1,000 Gwei
- 1 Gwei  = 1,000,000 Kwei
- 1 Kwei  = 1,000 Wei
- 1 Ether = 1,000,000,000,000,000,000 Wei

在实际应用中，不同单位适用于不同的场景：  
Wei 和 Kwei：主要用于智能合约内部的精确计算  
Gwei：常用于表示交易费用，例如当前的 Gas 价格通常以 Gwei 为单位  
Ether：是用户日常交易和市场报价的基本单位  

**交易费用计算：** 

在以太坊网络上发送交易时，用户需要支付 Gas 费用，这一费用通常以 Gwei 为单位表示。例如，如果当前 Gas 价格为 20 Gwei，而交易消耗了 50,000 Gas，那么总费用为 20 Gwei * 50,000 = 1,000,000,000,000 Wei = 0.001 Ether​


# 第四章 工作原理和机制

以太坊交易本质上可以看成是世界状态的改变，通常交易类型有：
- 常规交易：从一个帐户到另一个帐户的交易。
- 合约部署交易：没有“to”地址的交易，数据字段用于合约代码。
- 执行合约：与已部署的智能合约进行交互的交易。 在这种情况下，“to”地址是智能合约地址。


> 举例：以太坊普通转账交易流程（Luke → Bob，10 ETH）：
> 1. 交易构造与广播：
> Luke 在本地钱包（如 MetaMask）中构造交易（包括 to、value、gas、nonce 等字段），用私钥签名。
> 签名后的交易广播到以太坊网络中的多个节点，被暂存在交易池（mempool）中。
> 2. 交易被矿工打包入区块：
> 各矿工节点从交易池中选择若干交易，打包形成候选区块。
> 不断尝试不同的 nonce 值，直到算出区块头哈希值小于当前难度目标。
> 成功的矿工广播新区块到全网。
> 3. 其他节点验证区块：
> 节点接收到新区块后，按区块中交易依次执行计算，更新本地状态。
> 校验区块头哈希、交易签名、状态根、交易根等是否一致。
> 如果验证通过，该区块被追加到本地区块链上，并进入“链的主分支”（Longest Chain）。
> 4. 交易完成：
> Bob 的账户余额增加 10 ETH，Luke 账户减少（10 ETH + 手续费）。
> 该交易状态成为区块链“共识”的一部分。

<div style="display: flex; justify-content: space-between; align-items: center;">
  <div style="flex: 1;">
    <img src="https://s21.ax1x.com/2025/07/24/pVJAbvQ.png" alt="图片1" style="height: 250px; width: auto;"/>
    <p style="text-align: center; color: gray;">以太坊交易流程POW</p>
  </div>
  <div style="width: 5px; height: 100%; background-color: black;"></div>
  <div style="flex: 1;">
    <img src="https://s21.ax1x.com/2025/07/24/pVJA78S.png" alt="图片2" style="height: 250px; width: auto;"/>
    <p style="text-align: center; color: gray;">以太坊交易流程POS</p>
  </div>
</div>


https://s21.ax1x.com/2025/07/24/pVJAI4f.png
https://s21.ax1x.com/2025/07/24/pVJA5UP.png

## 4.1 交易发起
- 创建交易：用户通过以太坊钱包或相关工具创建一笔交易，交易中需包含接收方地址、转账金额（以 Wei 为单位）、发送者的数字签名（用于授权转账）、可选的数据字段（如发送给合约的消息）、Gas Limit（即该交易允许执行的最大计算步骤数）以及 Gas Price（即发送者愿意为计算支付的费用）等信息。
- 本地验证：交易创建后，首先会在发送者的本地节点进行验证，验证内容包括数字签名是否正确、发送者账户余额是否足够支付转账金额及交易费用等。
## 4.2 交易传播
- 广播交易：如果本地验证通过，交易会被发送到以太坊网络中，广播给其他节点。
- 节点验证与转发：网络中的每个节点接收到交易后，会再次验证其合法性，包括签名验证、余额检查等。验证通过后，节点会将交易转发给其连接的其他节点，从而在整个网络中传播，确保交易能够被足够多的节点接收和处理。
## 4.3 交易打包
- 矿工/验证者选择交易：以太坊网络中的矿工（在 PoW 机制下）或验证者（在 PoS 机制下）会从交易池中选择待处理的交易。他们通常会优先选择 Gas Price 较高的交易，因为这样可以获得更多的奖励。
- 执行交易：矿工或验证者会对选中的交易进行处理，包括更新账户余额、执行与交易相关的智能合约代码（如果是合约调用交易）等操作。在执行过程中，会根据交易的 Gas Limit 和 Gas Price 计算所需的费用，如果费用不足，交易会失败。
- 生成新区块：将多个经过验证和执行的交易打包成一个新的区块，新区块中包含这些交易的详细信息以及与前一个区块的链接信息。
## 4.4 区块验证与确认
- 广播新区块：新区块生成后，会被广播到整个以太坊网络中。
- 其他节点验证：网络中的其他节点会对新区块进行验证，检查区块中的交易是否合法、区块的哈希值是否符合要求、与前一个区块的链接是否正确等。如果验证通过，该区块会被添加到区块链中。
- 交易确认：当新区块被成功添加到区块链中后，其中包含的交易就被认为是确认的。此时，交易的状态变更成为永久性的，不可逆转。用户可以通过区块链浏览器查看交易的确认状态。
## 4.5 费用支付与奖励
- 支付交易费用：交易的发送者需要支付 Gas 费用，费用的金额取决于交易的复杂程度（由 Gas Limit 决定）和发送者愿意支付的 Gas Price。这些费用会以 ETH 的形式支付给矿工或验证者，作为他们处理交易和维护网络的奖励。
- 销毁部分费用：根据以太坊的销毁机制，交易的基础费用会被销毁，从而减少以太坊的总供应量。







# 第五章 以太坊作为公链的特点和优势
以太坊是第一个支持图灵完备编程语言的区块链平台，其智能合约语言为 Solidity，具备与传统编程语言类似的逻辑结构和编程能力，意味着可以编写任意复杂的逻辑结构，实现几乎所有可以用程序描述的应用场景。

> 智能合约（Smart Contract）是部署在区块链上的一段自动执行的程序。当满足特定条件时，它可以自动执行合约条款，无需人工干预或第三方中介。

## 5.1 以太坊全球最大、最活跃的区块链开发者社区
### 5.1.1 开发者数量全球最多（截至2025年中）

| 指标      | 以太坊       | 其他公链（对比）           |
| --------------- | ---------------------- | ------------------------ |
| **月活跃开发者数量**    | 约 5000\~6000 人      | Solana：1200+<br>Polkadot：800+<br>BNB Chain：1000+ |
| **累计贡献者数量**    | 超过 40000+ GitHub地址上有提交记录 | 极大超过其他链    |
| **GitHub代码库数量** | 超过 350+ 重要开源项目    | 同类链平均不足百个    |

### 5.1.2 活动频率与参与度

| 活动类型               | 举办频率        | 影响力                |
| ------------------ | ----------- | ---------------------------- |
| **Devcon 全球开发者大会** | 每年举办一次，官方组织 | 最具声望，以太坊“年度大会”               |
| **ETHGlobal 黑客松**  | 每季度数次，遍布全球  | 超过 100 场，覆盖纽约、香港、东京、巴黎等城市    |
| **社区自发聚会**         | 每周、每月数百场    | Meetup、Discord、Telegram 活跃持续 |

### 5.1.3 最广泛的语言与工具支持

- Solidity已成为加密行业标准的智能合约语言，几乎所有兼容EVM的公链（如Polygon、BNB Chain、Avalanche）都默认支持  
- 配套工具链完善：Remix IDE、Hardhat、Foundry、Ethers.js、The Graph 等皆由以太坊社区贡献
- 以太坊也是账户抽象（Account Abstraction）、Layer 2 Rollup、ZK-SNARK 等先进技术的孵化源头


## 5.2 其他公链对比OnePage

| 对比维度             | **Ethereum** 以太坊             | **Solana** 索拉纳         | **Polkadot** 波卡              | **BNB Chain** 币安链      | **Avalanche** 雪崩链               |
|------------------|------------------------------|------------------------|------------------------------|------------------------|---------------------------------|
| **智能合约能力**       | 图灵完备<br>支持复杂逻辑<br>Solidity主导 | 图灵完备<br>高性能，支持Rust     | 支持（via 平行链）<br>合约复杂性取决于平行链设计 | 图灵完备<br>兼容EVM<br>以太坊分叉 | 图灵完备<br>兼容EVM & Subnet          |
| **共识机制**         | PoS（Casper）                  | PoH+PoS（高性能）           | NPoS（提名权益证明）                 | PoSA（验证人授权）            | PoS + 雪崩共识（Avalanche Consensus） |
| **交易速度（TPS）**    | 数百 TPS（L2可扩展至万级）             | 约 5,000+ TPS           | 依赖平行链实现                      | 数百 TPS                 | 原生TPS高，分网并行执行                   |
| **交易费用**         | 高（但L2显著降低）                   | 低                      | 中等                           | 低                      | 中等偏低                            |
| **生态活跃度**        | ⭐⭐⭐⭐（最活跃）                    | ⭐⭐⭐（NFT/游戏生态强）         | ⭐⭐（技术型生态）                    | ⭐⭐⭐（币安支持）              | ⭐⭐（DeFi发展快）                     |
| **开发语言**         | Solidity                     | Rust                   | Rust / Ink!                  | Solidity               | Solidity（兼容EVM）                 |
| **EVM兼容性**       | 原生EVM                        | ❌（非EVM）                | 部分平行链兼容                      | 完全兼容                   | 完全兼容                            |
| **典型应用**         | Uniswap, Aave, ENS, OpenSea  | Jupiter, Helium, StepN | Moonbeam, Acala, Phala       | PancakeSwap, Venus     | TraderJoe, GMX                  |
| **特点总结**         | 最强的通用性与生态系统                  | 快速+低费用+适合游戏/NFT        | 跨链互操作设计先进                    | CEX支持强，用户量大            | Subnet支持灵活的定制链结构                |
| **代币流通市值（2025）** | \~\$4000亿                    | \~\$800亿               | \~\$80亿                      | \~\$900亿               | \~\$80亿                         |



# 第六章 以太坊链上的应用
  
## 6.1 去中心化金融（DeFi）
1. DeFi定义  
Decentralized Finance（简称 DeFi）是一种新兴的金融模式，它利用区块链技术，尤其是智能合约和去中心化网络，来构建一个无需传统金融机构（如银行、证券交易所等）介入的金融生态系统  
- 去中心化：DeFi 核心在于“去中心化”，即没有单一的控制中心或权威机构。所有金融交易和操作都通过区块链网络进行，由网络中的节点共同验证和记录，而不是依赖于某个中心化的机构（如银行）来管理和控制
- 智能合约：DeFi 的运行主要依赖于智能合约。智能合约是一种自动执行的合约条款，以代码的形式部署在区块链上。当满足预设条件时，智能合约会自动执行相应的操作，无需人工干预。例如，在借贷协议中，当借款人满足还款条件时，智能合约会自动将抵押物归还给借款人
- 开放性和透明性：由于基于区块链技术，DeFi 的所有交易记录和智能合约代码都是公开透明的。任何人都可以查看交易历史和合约代码，这大大降低了信息不对称的问题，提高了金融系统的可信度  

2. DeFi主要应用领域
- 借贷平台：
  - 功能：用户可以将自己的加密货币作为抵押物，借入其他加密货币。同时，用户也可以将闲置的加密货币存入平台，获得利息收益
  - 优势：与传统借贷相比，DeFi 借贷无需繁琐的信用评估流程，只要有足够的抵押物即可进行借贷。此外，借贷利率通常由市场供需关系决定，更加灵活
  - 代表性项目： <u>Aave、Compound等 </u>。Aave是以太坊上最大的借代平台之一，用户可将加密货币存入平台赚取利息，也可进行借贷交易。Compound 同样是知名的去中心化借贷平台。

- 去中心化交易所(Decentralized Exchange)：
  - 功能：DEX允许用户在无需通过传统交易所的情况下，直接在区块链上进行加密货币的交易。用户可以将一种加密货币兑换成另一种加密货币，而无需将资产托管给第三方
  - 优势：DEX的交易过程更加安全，因为用户的资产始终掌握在自己手中，不存在被交易所挪用或被盗的风险。此外，DEX的交易费用通常较低
  - 代表性项目：<u>Uniswap、dYdX、SushiSwap等</u>。Uniswap 是以太坊上最流行的去中心化交易所之一，通过去中心化的自动化做市商机制，让用户可以自由交换加密货币

- 稳定币发行：
  - 功能：稳定币是一种价值相对稳定的加密货币，通常与法定货币（如美元）或其他资产挂钩。DeFi 平台可以通过抵押加密货币或算法机制来发行稳定币，以满足用户对稳定资产的需求。
  - 优势：稳定币在加密货币市场中具有重要的作用，它可以作为一种避险资产，也可以用于日常支付和交易，避免加密货币价格波动带来的风险。
  - 代表性项目：MakerDAO（发行 DAI 稳定币）。MakerDAO是以太坊的去中心化银行，可发行稳定币DAI和治理型代币MKR

## 6.2 非同质化代币（NFT）
1. NFT定义  
  Non-Fungible Token(简称 NFT)是一种基于区块链技术的独特数字资产，它与传统的加密货币（如比特币或以太坊）不同，因为每个NFT都是独一无二的，不可互换的
- 非同质化（Non-Fungible）
  - 不可互换性：与比特币等同质化代币（Fungible Token）不同，NFT每一个代币都是独一无二的，具有独特的标识符和元数据。例如，一张数字艺术品的NFT与另一张数字艺术品的NFT是完全不同的，不能直接互换
  - 不可分割性：NFT 通常不能分割成更小的单位。例如，你不能拥有一个 NFT 的 0.5 份额，而必须拥有整个 NFT
- 基于区块链：NFT通常构建在以太坊(Ethereum)等区块链平台上，利用智能合约技术来确保其独特性和所有权的可验证性。每个NFT的所有权记录和交易历史都被永久记录在区块链上，无法篡改
- 数字所有权证明：NFT 本质上是一个数字所有权证明，它证明了某个数字资产（如艺术品、音乐、视频、游戏道具等）的所有权归属于某个特定的地址（钱包）。这种所有权证明是不可伪造的，且可以追溯

2. NFT主要应用场景
- 收藏品：
  - 功能：NFT 可以用于创建和交易数字收藏品，如虚拟卡片、虚拟玩具、虚拟文物等。这些收藏品具有稀缺性和独特性，吸引了大量收藏爱好者。
  - 优势：NFT 收藏品的稀缺性和唯一性使其具有投资价值，同时区块链技术确保了收藏品的真实性和所有权。
  - 代表性项目：CryptoPunks 是最早的NFT项目之一，由10000个独一无二的 24x24、8bit 样式的不规则像素组成，其中外星人像素最为稀有，交易额位居收藏品类NFT项目第一。Bored Ape Yacht Club 是一组猿猴 NFT 收藏品，历史交易总额排名第五

- 数字艺术品：
  - 功能：艺术家可以将自己的作品（如绘画、雕塑、数字艺术等）转化为 NFT，通过区块链技术确保作品的唯一性和所有权。买家购买 NFT 后，就拥有了该作品的数字所有权
  - 优势：NFT 为艺术家提供了一种新的收入来源，同时解决了数字艺术品的版权和真实性问题。例如，Beeple 的数字艺术品《Everydays: The First 5000 Days》以 6900 万美元的价格在佳士得拍卖行成交，成为 NFT 艺术品的标志性事件
  - 代表性项目：CryptoPunks、Bored Ape Yacht Club、SuperRare 等

- 游戏：
  - 功能：NFT 可以用于游戏中的虚拟道具、角色、土地等资产的交易和管理。玩家可以通过购买 NFT 获得游戏内的独特道具或角色，并在游戏外进行交易
  - 优势：NFT 为游戏玩家提供了真正的资产所有权，玩家可以自由买卖游戏内的资产，而无需依赖游戏开发商的中心化系统
  - 代表性项目：Axie Infinity 是一款基于以太坊的 NFT 游戏，玩家可以通过收集、繁殖和战斗 Axie 怪物来赚取加密货币，其交易额在游戏类 NFT 中占据较大比例。Gods Unchained 是一款区块链卡牌游戏，通过区块链上的卡牌系统，让玩家能获得具有实际价值的奖励

- 元宇宙：The Sandbox、CryptoVoxels、Somnium Space 等项目通过 NFT 技术构建虚拟世界，用户可以在其中购买虚拟土地、建筑等资产
  - 功能：NFT 可以用于构建虚拟世界中的土地、建筑、物品等资产的所有权证明。这些资产可以在虚拟世界中进行交易和使用
  - 优势：NFT 为元宇宙提供了经济基础，确保了虚拟资产的真实性和可交易性
  - 代表性项目：The Sandbox、Decentraland 等



## 6.3 去中心化应用（DApps）
1.  DApps定义  
Decentralized Applications(简称 DApps)是一种运行在区块链网络上的应用程序，与传统的中心化应用程序（如微信、支付宝等）不同，DApps 不依赖于单一的中心化服务器或控制机构，而是通过分布式网络和智能合约来实现其功能
- 去中心化架构
  - 分布式网络：DApps 运行在区块链网络上，数据存储和计算分布在多个节点上，而不是集中在一个中心服务器上。这种分布式架构使得 DApps 更加安全和抗审查，因为没有单一的控制点可以被攻击或篡改
  - 智能合约：DApps 的核心功能通常由智能合约实现。智能合约是一种自动执行的合约条款，以代码的形式部署在区块链上。当满足预设条件时，智能合约会自动执行相应的操作，无需人工干预。例如，在一个去中心化借贷平台中，智能合约可以自动管理用户的抵押物和贷款
- 开放性和透明性
  - 开源代码：大多数 DApps 的代码是开源的，任何人都可以查看和验证其代码逻辑。这增加了用户对 DApps 的信任，因为用户可以确保 DApps 没有隐藏的恶意代码
  - 透明交易记录：所有交易记录和数据都被永久记录在区块链上，用户可以随时查看这些记录。这种透明性使得 DApps 的操作更加可信，用户可以追溯每一笔交易的来源和去向
- 用户自主性
  - 用户控制数据：在 DApps 中，用户对自己的数据拥有完全的控制权。用户的数据存储在区块链上，而不是由中心化的公司管理。用户可以决定谁可以访问他们的数据，以及如何使用这些数据
  - 无需许可：DApps 通常不需要用户进行复杂的注册或身份验证过程。用户只需要一个加密货币钱包（如 MetaMask），即可访问和使用 DApps

2. DApps主要应用场景
- 钱包类：MetaMask 是一款超流行的以太坊钱包，支持众多 DApps 和去中心化交易所。Trust Wallet 由 Binance 支持，界面友好且安全性高。
- 开发工具类：Hardhat 是一个专为专业人士设计的以太坊开发环境，支持常见任务如运行测试、自动检查代码错误以及与智能合约交互。
- 其他：以太坊上的 DApps 还涵盖了社交、投票、预测市场等多个领域。


## 6.4 Layer 2解决方案

1. Layer2解决方案是一类通过在区块链之上构建第二层协议或网络，来提升区块链吞吐量与性能的技术。其核心逻辑是将部分交易或计算从主链（如以太坊）转移至第二层网络，从而减轻主链负担。Layer 2 的主要目标是：1)提高吞吐量 2)提高交易确认速度 3)降低交易费用

1. Layer2解决方案主要有以下几种类型：
- Rollups：将大量交易打包处理后，将数据压缩并提交到链上。主要有 Optimistic Rollups 和 Zero-Knowledge Rollups（ZK Rollups）
  - Optimistic Rollups：假设交易默认有效，只有在遇到欺诈证明时才会进行计算
  - ZK Rollups：通过零知识证明技术，将交易数据压缩后提交到链上，验证过程更高效
- 侧链（Sidechains）：独立运行的区块链，与主链通过双向锚定机制连接，用户可以在两者之间转移资产
- 状态通道（State Channels）：允许参与者在链下进行大量交易，仅向主链提交开启和关闭状态通道的交易




---

## 附录：重要关键词

1. 质押常见场景：
   1. 以太坊 2.0 验证者质押 ：用户质押 32 ETH 成为以太坊 2.0 的验证者，参与区块验证和创建。验证者需要运行特定的软件和节点，保持网络连接和硬件设备的正常运行，以履行验证职责并获得奖励。
   2. CeFi 平台质押 ：一些中心化金融平台（如 Coinbase、Binance 等）提供质押 ETH 获得稳定收益的服务。用户将 ETH 质押到平台后，平台会将这些 ETH 用于 PoS 挖矿、流动性挖矿或其他投资活动，用户则可以获得相应的利息或收益。
2. EIP和ERC
   1. EIP
   2. ERC(ethereum request for comment) 以太坊征求意见
     - 代币标准合约(ERC20): 20是github上的第20个代号？？具体？
     - NFT非同质化代币(ERC721、ERC1155):
     - 半同质化代币(ERC3475、ERC3525):
3. RLP  
    RLP（Recursive Length Prefix）是一种用于编码和解码数据的序列化格式，主要用于以太坊区块链中。它是一种二进制编码方式，可以将任意数据结构（如数组、字符串、数字等）编码为字节序列，以便在区块链中存储和传输。RLP 是以太坊协议中用于数据序列化的核心技术之一
4. 信标链
   - 定义：信标链是PoS共识的主控链（决定哪个区块被共识），与以太坊的主链协同工作
   - 作用：
      - 管理验证者集合（包括激活、退出、slash 等）
      - 随每个 Slot 调度 proposer 和分配 attesters
      - 收集 attestation 并通过 LMD-GHOST + FFG 算法确定链头和 finality
5. Slot
   - Slot 是 12 秒的时间单位，是以太坊 PoS 的最小出块周期
   - 在信标链正常运行情况下，每个 Slot 理论上 可以生成一个区块
   - 32 个 Slot 组成一个 Epoch（约 6.4 分钟），Epoch 是验证者轮换、激活/退出的调度单位


---
## 资料来源：


V神讲解以太坊视频 https://www.youtube.com/watch?v=UihMqcj-cqc

关于以太坊的一个纪录片：《Vitalik：An Ethereum Story》

以太坊整体信息（简洁）：https://www.bilibili.com/video/BV1W94y1g7kq?spm_id_from=333.788.videopod.sections&vd_source=1721998f1cba8fd694acd67e1dc0518f

以太坊整体信息（知识丰富度高）：https://www.bilibili.com/video/BV14b421B7dN?spm_id_from=333.788.player.switch&vd_source=1721998f1cba8fd694acd67e1dc0518f&p=3

北大公开课：https://www.bilibili.com/video/BV1YM411J7oS?spm_id_from=333.788.videopod.episodes&vd_source=1721998f1cba8fd694acd67e1dc0518f&p=4

MPT1：https://www.cnblogs.com/GarrettWale/p/15360340.html  
MPT2：https://neonewstoday.com/development/road-to-neo3-merkle-roots-patricia-tries-and-simplified-payment-verification/  
高质量图MPT：https://ethereum.stackexchange.com/questions/268/ethereum-block-architecture

完整的以太坊文章（英）：https://www.preethikasireddy.com/post/how-does-ethereum-work-anyway

智能合约口述原理：https://www.youtube.com/watch?v=vctJFlhh64E  
什么是智能合约和如何工作：https://www.youtube.com/watch?v=31bANKBMHUw  
以太坊架构和过程：https://medium.com/@Posvar/visualizing-the-ethereum-machine-b39875830ded

EVM PPT：https://takenobu-hs.github.io/downloads/ethereum_evm_illustrated.pdf

## 常见问题：
1. 比特币UTXO模型和以太坊账户模型的优缺点
2. 默克尔证明过程 --MPT资料
3. 